---
import { getCollection } from "astro:content";
import ProjectPreview from "../components/ProjectPreview.astro";
import BaseLayout from "../layouts/Base.astro";
import Intro from "../components/Intro.astro";
import PageHeading from "../components/PageHeading.astro";

let allBlogPosts = await getCollection("blog");
let projects = await getCollection("projects");

let sortedPosts = allBlogPosts.sort(
  (a, b) => new Date(b.data.date).valueOf() - new Date(a.data.date).valueOf()
);
---

<BaseLayout
  title="Nick Ball"
  description="Web developer based in Portland, OR."
>
  <Intro />

  <div class="space-y-24">
    <section class="space-y-4">
      <PageHeading>Projects</PageHeading>
      <div class="space-y-8">
        {projects.map((project) => <ProjectPreview {project} />)}
      </div>
    </section>

    <section class="space-y-4">
      <PageHeading>Posts</PageHeading>
      <div class="space-y-8">
        <ul class="space-y-6 md:space-y-6">
          {
            sortedPosts.map((post) => (
              <li>
                <a
                  class="group flex flex-col no-underline"
                  href={`/posts/${post.slug}`}
                >
                  <span class="text text-2xl font-medium transition-colors group-hover:text-accent-11 dark:group-hover:text-accent-dark-11 md:text-2xl">
                    {post.data.title}
                  </span>
                  <span class="text-light text-lg font-normal transition-colors group-hover:text-accent-11 dark:group-hover:text-accent-dark-10">
                    {post.data.description}
                  </span>
                </a>
              </li>
            ))
          }
        </ul>
      </div>
    </section>
  </div>
</BaseLayout>
