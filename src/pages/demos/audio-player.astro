---
import BaseLayout from "../../layouts/Base.astro";
import { Final } from "../../components/audio-player/finished.tsx";
import FinalRaw from "../../components/audio-player/finished.tsx?raw";
import { Code } from "astro:components";
---

<BaseLayout
  size="wide"
  title="Snippets | Nick Ball"
  description="Svelte Audio Player by Nick Ball, Software developer based in Portland, OR."
>
  <main class="">
    <h1 class="mb-4 text-3xl font-semibold">React Audio Player</h1>
    <Final client:load />
    <div class="prose relative mx-auto max-w-none">
      <button
        id="copy"
        class="absolute right-2 top-2 h-6 rounded bg-orange-900 px-2 text-xs text-orange-50 hover:bg-orange-700"
        >Copy Code</button
      >
      <Code code={FinalRaw} lang="tsx" />
    </div>
  </main>
</BaseLayout>

<script>
  let copyButton = document.getElementById("copy");

  copyButton.addEventListener("click", async () => {
    const pre = document.querySelector("pre");
    const code = document.querySelector("code");
    await navigator.clipboard.writeText(code.innerText);

    // visual feedback that task is completed
    copyButton.innerText = "Copied";

    setTimeout(() => {
      copyButton.innerText = "Copy";
    }, 700);
  });
</script>
